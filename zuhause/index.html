<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Sign Up | Log In</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style.js">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Firebase SDK einbinden -->
    <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.9.3/firebase-auth.js"></script>
  </head>
  <body>
    <div class="wrapper">
       <div class="title-text">
          <div class="title login">
             Account 
          </div>
          <div class="title signup">
             Account
          </div>
       </div>
       <div class="form-container">
          <div class="slide-controls">
             <input type="radio" name="slide" id="login" checked>
             <input type="radio" name="slide" id="signup">
             <label for="login" class="slide login">Login</label>
             <label for="signup" class="slide signup">SignUp</label>
             <div class="slider-tab"></div>
          </div>
          <div class="form-inner">
             <!-- Login Form -->
             <form action="#" class="login" id="login-form">
                <div class="field">
                   <input type="email" id="login-email" placeholder="Email Address" required>
                </div>
                <div class="field">
                   <input type="password" id="login-password" placeholder="Password" required>
                </div>
                <div class="pass-link">
                   <a href="#">Reset password?</a>
                </div>
                <div class="field btn">
                   <div class="btn-layer"></div>
                   <input type="button" value="Login" onclick="login()">
                </div>
                <div class="signup-link">
                   Don't Have Account? <a href="javascript:void(0);" onclick="toggleForms()">Create A New</a>
                </div>
             </form>
             
             <!-- SignUp Form -->
             <form action="#" class="signup" id="signup-form" style="display: none;">
                <div class="field">
                   <input type="email" id="signup-email" placeholder="Email Address" required>
                </div>
                <div class="field">
                   <input type="password" id="signup-password" placeholder="Password" required>
                </div>
                <div class="field">
                   <input type="password" id="confirm-password" placeholder="Confirm Password" required>
                </div>
                <div class="field btn">
                   <div class="btn-layer"></div>
                   <input type="button" value="SignUp" onclick="signup()">
                </div>
             </form>
          </div>
       </div>
    </div>

    <!-- Firebase-Konfiguration und Auth-Funktionen -->
    <script>
      // Firebase-Konfiguration
      const firebaseConfig = {
        apiKey: "AIzaSyAwheajWUhW3Fqb12NMQ68XwX7_enFlx2A",
        authDomain: "home-eb7e6.firebaseapp.com",
        projectId: "home-eb7e6",
        storageBucket: "home-eb7e6.firebasestorage.app",
        messagingSenderId: "1052466023200",
        appId: "1:1052466023200:web:4765e334cc370a38356545",
        measurementId: "G-BZZ1SQ3SJR"
      };

      // Firebase initialisieren
      const app = firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();

      // Login-Funktion
      function login() {
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;

        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log('Benutzer eingeloggt:', userCredential.user);
            alert("Erfolgreich eingeloggt!");
            // Weiterleitung zur Dashboard-Seite
            window.location.href = "dashboard.html"; 
          })
          .catch((error) => {
            console.error('Fehler bei der Anmeldung:', error.message);
            alert("Fehler bei der Anmeldung: " + error.message);
          });
      }

      // Signup-Funktion
      function signup() {
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const confirmPassword = document.getElementById('confirm-password').value;

        if (password !== confirmPassword) {
          alert("Die Passwörter stimmen nicht überein!");
          return;
        }

        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log('Benutzer registriert:', userCredential.user);
            alert("Erfolgreich registriert!");
            // Weiterleitung zur Dashboard-Seite
            window.location.href = "dashboard.html"; 
          })
          .catch((error) => {
            console.error('Fehler bei der Registrierung:', error.message);
            alert("Fehler bei der Registrierung: " + error.message);
          });
      }

      // Formularwechsel (falls gewünscht, zusätzlich zur Umschalt-Animation in style.js)
      function toggleForms() {
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        if (loginForm.style.display === 'none') {
          loginForm.style.display = 'block';
          signupForm.style.display = 'none';
        } else {
          loginForm.style.display = 'none';
          signupForm.style.display = 'block';
        }
      }

      // Überwacht den Auth-Status
      auth.onAuthStateChanged((user) => {
        if (user) {
          console.log('Benutzer ist eingeloggt:', user);
          // Du kannst hier weitere Aktionen durchführen, z.B. automatische Weiterleitung
        } else {
          console.log('Kein Benutzer eingeloggt');
        }
      });
    </script>

    <!-- Formular-Umschalt-Animation -->
    <script src="style.js"></script>
  </body>
</html>
